\newcommand\ipythonin[1]{%
\textcolor{green}{In [#1]:}%
}
\newcommand\ipythonout[1]{%
\textcolor{red}{Out[#1]:}%
}
\newcommand\ipythoncont{%
\textcolor{green}{~~~...:}%
}

\newcount \inpy
\newcount \uncovercount

\newenvironment{ipython}%
{ %
\fontfamily{cmtt} %
\fontsize{11pt}{11pt}
\selectfont %
\mode<article>{%
\setlength{\fboxsep}{3pt}%
\setlength{\FrameSep}{3pt}%
\begin{framed} %
}%
\mode<presentation>{ %
\begin{beamercolorbox}{terminal} %
} %
\begin{semiverbatim} %
\inpy=0 %
\uncovercount=1 %
\uncover<0->{\$ ipython} %
}
{ %
\end{semiverbatim} %
\mode<presentation>{%
\end{beamercolorbox}%
} %
\mode<article>{%
\end{framed} %
}
}

\newcommand\ipinpt[1]{ %
\advance \inpy by 1 %
\advance \uncovercount by 1 %
\uncover<\the\uncovercount->{\ipythonin{\the\inpy}$\texttt{#1}$} %
}
\newcommand\ipoutp[1]{ %
\advance \uncovercount by 1 %
\uncover<\the\uncovercount->{\ipythonout{\the\inpy}$\texttt{#1}$} %
}
\newcommand\ipcont[1]{ %
\uncover<\the\uncovercount->{\ipythoncont $\texttt{#1}$} %
}
\newcommand\hlcmd[1]{ %
\texttt{\em{#1}} %
}
\newcommand\ipwrapp[1]{ %
\uncover<\the\uncovercount->{$\texttt{#1}$} %
}
% Fonctions utilisées pour l'affichage de la grammaire %
\lstnewenvironment{grammaire}{
\mode<presentation>{
\lstset{
basicstyle         = \footnotesize\ttfamily\color{black},
identifierstyle    = \color{black},%
commentstyle       = \color{black},%
keywordstyle       = \color{black},%
stringstyle        = \color{black},%
emphstyle          = \color{black},%
extendedchars      = true,% permet d'avoir des accents dans le code
showspaces         = false,%
showstringspaces   = false,%
backgroundcolor    = \color{sand},%
columns=fixed,
}}
\mode<article>{
\lstset{
basicstyle         = \footnotesize\ttfamily\color{black},
identifierstyle    = \color{black},%
commentstyle       = \color{black},%
keywordstyle       = \color{black},%
stringstyle        = \color{black},%
emphstyle          = \color{black},%
extendedchars      = true,% permet d'avoir des accents dans le code
showspaces         = false,%
showstringspaces   = false,%
backgroundcolor    = \color{white},%
columns=fixed,
}
}
}
{}
% Environnement spécifique au terminal %
\newenvironment{terminal}{
\mode<article>{\begin{framed}}
\mode<presentation>{\begin{beamercolorbox}{terminal}}
\begin{semiverbatim}
}
{
\end{semiverbatim}
\mode<presentation>{\end{beamercolorbox}}
\mode<article>{\end{framed}}
}
