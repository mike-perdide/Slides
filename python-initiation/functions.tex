\newcommand\ipythonin[1]{
    \textcolor{green}{In [#1]:}
}
\newcommand\ipythonout[1]{
    \textcolor{red}{Out[#1]:}
}
\newcommand\ipythoncont{
    \textcolor{green}{~~~...:}
}

%\newcount\inpycount
\newenvironment{ipython}
{
\fontfamily{cmtt}\selectfont
\begin{beamercolorbox}{terminal}
\begin{semiverbatim}
\newcount \inpy
\newcount \uncovercount
\inpy=0
\uncovercount=1
\uncover<0->{\$ ipython}
}
{
\end{semiverbatim}
\end{beamercolorbox}
}

%\newcommand\ipprompt{
%}

\newcommand\ipinpt[1]{
    \advance \inpy by 1
    \advance \uncovercount by 1
    \uncover<\the\uncovercount->{\ipythonin{\the\inpy}$\texttt{#1}$}
}

\newcommand\ipoutp[1]{
    \advance \uncovercount by 1
    \uncover<\the\uncovercount->{\ipythonout{\the\inpy}$\texttt{#1}$}
}

\newcommand\ipcont[1]{
    \uncover<\the\uncovercount->{\ipythoncont $\texttt{#1}$}
}
